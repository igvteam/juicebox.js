<html>
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Juicebox - ES6 </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.css">

    <!-- Juicebox CSS-->
    <link rel="stylesheet" type="text/css" href="../css/juicebox.css">

</head>

<body>

<div id="app-container"></div>

<script type="module">

    import juicebox from '../js/index.js'


    const config =
        {

            // hg19
            url: "https://www.encodeproject.org/files/ENCFF718AWL/@@download/ENCFF718AWL.hic",

            name: "GM12878",

            locus: '8',

            tracks:
                [
                    // {
                    //     // type: "sequence",
                    //     // name: "Human (GRCh37/hg19)",     // <= Optional
                    //     url: "https://s3.amazonaws.com/igv.broadinstitute.org/genomes/seq/hg19/hg19.fasta",
                    //     indexURL: "https://s3.amazonaws.com/igv.broadinstitute.org/genomes/seq/hg19/hg19.fasta.fai",
                    // },
                    // {
                    //     "url": "https://www.encodeproject.org/files/ENCFF754TJH/@@download/ENCFF754TJH.bigWig",
                    //     "name": "Encode bigwig",
                    //     color: "#ff0289"
                    // },
                ]
        }

    const config_deep_map =
        {

            // hg38
            url: "https://s3.us-central-1.wasabisys.com/aiden-encode-hic-mirror/moshe/all.hic",
            name: "Deep Map Test",

            // locus: '8',
            locus: 'chr8:63,069,506-63,074,545',
            // tracks:
            //     [
            //         {
            //             name: "Sequence - As Track",
            //             url: "https://s3.amazonaws.com/igv.broadinstitute.org/genomes/seq/hg38/hg38.fa",
            //             indexURL: "https://s3.amazonaws.com/igv.broadinstitute.org/genomes/seq/hg38/hg38.fa.fai",
            //         },
            //         {
            //             name: "Refseq Genes - As Track",
            //             format: "refgene",
            //             url: "https://s3.amazonaws.com/igv.org.genomes/hg38/ncbiRefSeq.txt.gz",
            //             indexURL: "https://s3.amazonaws.com/igv.org.genomes/hg38/ncbiRefSeq.txt.gz.tbi"
            //         }
            //     ],
        }

    const debug =
        {
            url: 'https://hicfiles.s3.amazonaws.com/external/ay/p-falciparum-3d7-0h-hiseq.hic',
            name: 'No Sequence Track Available',
        }

    juicebox.init(document.getElementById("app-container"), debug)
        .then(browser => {

            console.log(`${ browser.id } is good to go`)

            const { id } = browser.genome
            console.log(`genome change to ${ id }`)

            const { config } = browser.genome

            if (config.track) {
                browser.loadTracks([ config, config.track ])
            } else {
                browser.loadTracks([ config ])
            }


        })


</script>

</body>

</html>
